<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
  <!-- Title -->
  <text x="400" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">
    Constraint Enforcement Flow
  </text>

  <!-- Start node -->
  <rect x="325" y="60" width="150" height="50" rx="5" fill="#4A90E2" stroke="#2E5C8A" stroke-width="2"/>
  <text x="400" y="90" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
    INSERT/UPDATE
  </text>

  <!-- Arrow -->
  <line x1="400" y1="110" x2="400" y2="140" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- NOT NULL Check -->
  <polygon points="400,140 500,180 400,220 300,180" fill="#FFE6CC" stroke="#D79B00" stroke-width="2"/>
  <text x="400" y="185" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#333">
    NOT NULL Check
  </text>

  <!-- NOT NULL Fail -->
  <line x1="500" y1="180" x2="600" y2="180" stroke="#D32F2F" stroke-width="2" marker-end="url(#arrowhead-red)"/>
  <rect x="600" y="160" width="150" height="40" rx="5" fill="#FFCDD2" stroke="#D32F2F" stroke-width="2"/>
  <text x="675" y="175" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#D32F2F">
    ❌ NULL Violation
  </text>
  <text x="675" y="192" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#D32F2F">
    Error returned
  </text>

  <!-- NOT NULL Pass -->
  <line x1="400" y1="220" x2="400" y2="260" stroke="#4CAF50" stroke-width="2" marker-end="url(#arrowhead-green)"/>
  <text x="420" y="245" font-family="Arial, sans-serif" font-size="11" fill="#4CAF50">PASS</text>

  <!-- CHECK Constraint -->
  <polygon points="400,260 500,300 400,340 300,300" fill="#FFE6CC" stroke="#D79B00" stroke-width="2"/>
  <text x="400" y="305" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#333">
    CHECK Constraint
  </text>

  <!-- CHECK Fail -->
  <line x1="500" y1="300" x2="600" y2="300" stroke="#D32F2F" stroke-width="2" marker-end="url(#arrowhead-red)"/>
  <rect x="600" y="280" width="150" height="40" rx="5" fill="#FFCDD2" stroke="#D32F2F" stroke-width="2"/>
  <text x="675" y="295" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#D32F2F">
    ❌ CHECK Violation
  </text>
  <text x="675" y="312" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#D32F2F">
    Error returned
  </text>

  <!-- CHECK Pass -->
  <line x1="400" y1="340" x2="400" y2="380" stroke="#4CAF50" stroke-width="2" marker-end="url(#arrowhead-green)"/>
  <text x="420" y="365" font-family="Arial, sans-serif" font-size="11" fill="#4CAF50">PASS</text>

  <!-- UNIQUE Constraint -->
  <polygon points="400,380 500,420 400,460 300,420" fill="#FFE6CC" stroke="#D79B00" stroke-width="2"/>
  <text x="400" y="425" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#333">
    UNIQUE Constraint
  </text>

  <!-- UNIQUE Fail -->
  <line x1="500" y1="420" x2="600" y2="420" stroke="#D32F2F" stroke-width="2" marker-end="url(#arrowhead-red)"/>
  <rect x="600" y="400" width="150" height="40" rx="5" fill="#FFCDD2" stroke="#D32F2F" stroke-width="2"/>
  <text x="675" y="415" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#D32F2F">
    ❌ UNIQUE Violation
  </text>
  <text x="675" y="432" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#D32F2F">
    Error returned
  </text>

  <!-- UNIQUE Pass -->
  <line x1="400" y1="460" x2="400" y2="500" stroke="#4CAF50" stroke-width="2" marker-end="url(#arrowhead-green)"/>
  <text x="420" y="485" font-family="Arial, sans-serif" font-size="11" fill="#4CAF50">PASS</text>

  <!-- FOREIGN KEY Check -->
  <polygon points="400,500 500,540 400,580 300,540" fill="#FFE6CC" stroke="#D79B00" stroke-width="2"/>
  <text x="400" y="545" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#333">
    FOREIGN KEY
  </text>

  <!-- FK Fail -->
  <line x1="300" y1="540" x2="200" y2="540" stroke="#D32F2F" stroke-width="2" marker-end="url(#arrowhead-red)"/>
  <rect x="50" y="520" width="150" height="40" rx="5" fill="#FFCDD2" stroke="#D32F2F" stroke-width="2"/>
  <text x="125" y="535" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#D32F2F">
    ❌ FK Violation
  </text>
  <text x="125" y="552" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#D32F2F">
    Error returned
  </text>

  <!-- Success -->
  <line x1="400" y1="580" x2="400" y2="600" stroke="#4CAF50" stroke-width="2"/>
  <text x="420" y="595" font-family="Arial, sans-serif" font-size="11" fill="#4CAF50">PASS</text>

  <!-- Final success box -->
  <rect x="325" y="600" width="150" height="50" rx="5" fill="#4CAF50" stroke="#2E7D32" stroke-width="2"/>
  <text x="400" y="630" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
    ✅ COMMIT
  </text>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333"/>
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#D32F2F"/>
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#4CAF50"/>
    </marker>
  </defs>
</svg>